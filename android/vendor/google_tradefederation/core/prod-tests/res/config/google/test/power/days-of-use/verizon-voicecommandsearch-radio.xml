<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright 2016 Google Inc. All Rights Reserved -->
<!-- Required input: monsoon_serialno MONSOON_SERIALNO -->
<!-- Required input: push-file:push BLUETOOTH_DEVICE_CONFIG_FILE->/data/misc/bluedroid/bt_config.conf -->
<!-- Required input: test_arguments bluetooth_device_mac_addr BLUETOOTH_DEVICE_MAC_ADDR -->
<!-- Required input: test_arguments wifi_ssid WIFI_SSID -->
<!-- Required input: companion-serial COMPANION_SERIALNO -->
<configuration description="Downloads build, flashes on device, and runs power test">
  <option name="test-tag" value="VerizonVoiceCommandSearchRADIO" />

  <include name="google/test/power/common/verizon-days-of-use" />

  <target_preparer class="com.google.android.tradefed.targetprep.clockwork.ClockworkCompanionAllocator" />

  <target_preparer class="com.android.tradefed.targetprep.RunCommandTargetPreparer">
    <option name="run-command" value="content insert --uri content://com.google.settings/partner --bind name:s:use_location_for_services --bind value:s:1" />
    <option name="run-command" value="content insert --uri content://com.google.settings/partner --bind name:s:network_location_opt_in --bind value:s:1" />
    <option name="run-command" value="settings put secure location_providers_allowed +gps" />
    <option name="run-command" value="settings put secure location_providers_allowed +network" />
  </target_preparer>

  <option name="schema_ru_pair" key="DoUVerizonTests-testVoiceCommandSearch-RADIOVoiceCommandSearchTest" value="VerizonDoU"/>

  <test class="com.google.android.power.tests.MonsoonPairingTestRunner">
    <option name="test_method" value="testVoiceCommandSearch"/>
    <option name="test_package" value="com.google.android.platform.dou"/>
    <option name="test_class" value="DoUVerizonTests"/>
    <option name="test_runner" value="android.test.InstrumentationTestRunner"/>

    <option name="test_duration" key="DoUVerizonTests-testVoiceCommandSearch-RADIOVoiceCommandSearchTest" value="480" />
    <option name="test_arguments" key="dou_mode" value="RADIO" />
    <option name="test_arguments" key="log_delay_in_seconds" value="1" />
    <option name="test_arguments" key="precondition_bluetooth" value="ON" />
    <option name="test_arguments" key="precondition_gps" value="ON" />
    <option name="test_arguments" key="precondition_location" value="ON" />
    <option name="test_arguments" key="precondition_mobile_data" value="ON" />
    <option name="test_arguments" key="precondition_radio" value="CONNECTED" />
    <option name="test_arguments" key="precondition_wifi" value="ON" />
    <option name="test_arguments" key="profile_iterations" value="1" />
    <option name="test_arguments" key="short_delay_in_seconds" value="15" />
    <option name="test_arguments" key="typing_delay_in_mseconds" value="1" />

    <option name="save_result_on_host" value="true"/>
    <option name="monsoon_voltage" value="4.2"/>
    <option name="monsoon_duration" value="660"/>
    <option name="monsoon_frequency" value="1000"/>
    <option name="wait_for_disconnect_signal" value="true"/>
    <option name="report_unit_mw" value="false"/>

    <device_requirements class="com.google.android.tradefed.device.GoogleDeviceSelectionOptions" />
    <option name="run-companion-instrumentation" value="true" />
    <option name="companion_test_method" value="testVoiceCommandSearchCompanion"/>
    <option name="companion_test_class" value="DoUVerizonTests"/>
    <option name="companion_test_package" value="com.google.android.platform.dou"/>
    <option name="companion_test_runner" value="android.test.InstrumentationTestRunner"/>
    <option name="companion_test_arguments" key="DoUVerizonTests-testVoiceCommandSearchCompanion-RADIOMusicPlayingTest" value="240"/>
    <option name="companion_test_arguments" key="album_name" value="Music"/>
    <option name="companion_test_arguments" key="audio_volume" value="90"/>
    <option name="companion_test_arguments" key="dou_mode" value="RADIO"/>
    <option name="companion_test_arguments" key="log_delay_in_seconds" value="1"/>
    <option name="companion_test_arguments" key="precondition_bluetooth" value="OFF"/>
    <option name="companion_test_arguments" key="precondition_gps" value="ON"/>
    <option name="companion_test_arguments" key="precondition_location" value="ON"/>
    <option name="companion_test_arguments" key="precondition_mobile_data" value="ON"/>
    <option name="companion_test_arguments" key="precondition_radio" value="CONNECTED"/>
    <option name="companion_test_arguments" key="precondition_wifi" value="ON"/>
    <option name="companion_test_arguments" key="profile_iterations" value="1"/>
    <option name="companion_test_arguments" key="short_delay_in_seconds" value="15"/>
    <option name="companion_test_arguments" key="song_name" value="PizzaShop"/>
    <option name="companion_test_arguments" key="typing_delay_in_mseconds" value="1"/>
    <option name="companion_test_timeout" value="420"/>
  </test>
</configuration>
