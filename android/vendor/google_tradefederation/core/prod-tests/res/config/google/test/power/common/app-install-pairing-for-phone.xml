<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright 2015 Google Inc. All Rights Reserved -->
<configuration description="Install apks needed for most power tests">
    <target_preparer class="com.android.tradefed.targetprep.TestAppInstallSetup">
        <option name="alt-dir" value="/google/data/ro/teams/tradefed/testdata/power" />
        <option name="test-file-name" value="Power.apk" />
        <option name="test-file-name" value="PowerTests.apk" />
        <option name="test-file-name" value="GeppettoPowerTest.apk" />
    </target_preparer>

    <target_preparer class="com.android.tradefed.targetprep.TestAppInstallSetup">
        <option name="alt-dir" value="/google/data/ro/teams/tradefed/testdata/clockwork" />
        <option name="test-file-name" value="ClockworkCompanionGoogle.apk" />
        <option name="test-file-name" value="BluetoothTests.apk" />
    </target_preparer>

    <target_preparer class="com.android.tradefed.targetprep.TestAppInstallSetup">
        <option name="alt-dir" value="/google/data/ro/teams/tradefed/testdata/clockwork" />
        <option name="alt-dir-behavior" value="OVERRIDE" />
        <option name="test-file-name" value="GeppettoClockwork.apk" />
    </target_preparer>

    <target_preparer class="com.android.tradefed.targetprep.companion.CompanionTestAppInstallSetup">
        <option name="alt-dir" value="/google/data/ro/teams/tradefed/testdata/clockwork" />
        <option name="alt-dir-behavior" value="OVERRIDE" />
        <option name="test-file-name" value="BluetoothTests.apk" />
    </target_preparer>

    <!-- prep clockwork device with some commands -->
    <target_preparer class="com.android.tradefed.targetprep.companion.CompanionRunCommandTargetPreparer">
        <option name="run-command" value="pm disable com.google.android.wearable.app/com.google.android.clockwork.home.cloudsync.CloudSyncOptInService" />
        <option name="run-command" value="pm disable com.lge.wearable.chargingmode/com.lge.wearable.chargingmode.ChargingActivity" />
        <option name="run-command" value="pm disable com.google.android.apps.wearable.numbersync" />
    </target_preparer>

    <target_preparer class="com.android.tradefed.targetprep.RunCommandTargetPreparer">
        <option name="run-command" value="dumpsys deviceidle whitelist +com.google.android.wearable.app" />
    </target_preparer>

    <!-- Grant notification access for Android Wear app -->
    <target_preparer class="com.android.tradefed.targetprep.RunCommandTargetPreparer">
        <option name="run-command" value="am instrument -w -r -e class com.android.test.uiautomator.platform.clockwork.NotificationAccess com.android.test.uiautomator.platform.clockwork/android.support.test.uiautomator.UiAutomatorInstrumentationTestRunner" />
    </target_preparer>
</configuration>
