<?xml version="1.0" encoding="UTF-8"?>
<!-- Copyright 2015 Google Inc. All Rights Reserved -->
<configuration description="AUPT JAR configuration test template">
    <target_preparer class="com.google.android.tradefed.targetprep.InstallPublicApkSetup" />
    <target_preparer class="com.android.tradefed.targetprep.CrashCollector" />
    <target_preparer class="com.android.tradefed.targetprep.TestAppInstallSetup">
        <option name="test-file-name" value="DummyIME.apk" />
        <option name="test-file-name" value="AuptRunner.apk" />
    </target_preparer>
    <target_preparer class="com.android.tradefed.targetprep.TestFilePushSetup" />

    <target_preparer class="com.google.android.monkey.MonkeyAccountPreparer">
        <option name="account-sync" value="true" />
    </target_preparer>
    <target_preparer class="com.google.android.tradefed.targetprep.GoogleAppsSetup">
        <option name="vending-auto-update" value="OFF" />
    </target_preparer>
    <target_preparer class="com.android.tradefed.targetprep.PushFilePreparer">
        <!-- Push music to the device and scan for those files -->
        <option name="trigger-media-scan" value="true" />
        <option name="push" value="/google/data/ro/teams/tradefed/testdata/aupt/Music->/sdcard/Music" />
        <!-- Disable Chrome First Run Experience -->
        <option name="push" value="/google/data/ro/teams/tradefed/testdata/browser/chrome-command-line->/data/local/chrome-command-line" />
        <option name="push" value="/google/data/ro/teams/tradefed/testdata/browser/chrome-command-line->/data/local/tmp/chrome-command-line" />
    </target_preparer>

    <option name="bugreport-on-invocation-ended" value="false" />

    <target_preparer class="com.android.tradefed.targetprep.InstallApkSetup" />
    <target_preparer class="com.android.tradefed.targetprep.RunCommandTargetPreparer" />

    <target_preparer class="com.android.tradefed.targetprep.NativeLeakCollector" />

    <target_preparer class="com.google.android.tradefed.targetprep.DismissDialogsPreparer" >
        <option name="test-file-name" value="DialogDismissalUtil.apk" />
    </target_preparer>

    <target_preparer class="com.android.tradefed.targetprep.FolderSaver" />

    <test class="com.google.android.aupt.AuptTest">
        <option name="instrumentation" value="true" />
        <option name="package" value="android.support.test.aupt" />
        <option name="runner" value="android.support.test.aupt.AuptTestRunner" />

        <option name="run-arg" key="disable_ime" value="true" />
        <option name="run-arg" key="shortSleep" value="5000" />
        <option name="run-arg" key="longSleep" value="30000" />

        <option name="run-arg" key="bugreportInterval" value="30" />
        <option name="run-arg" key="meminfoInterval" value="5" />
        <option name="run-arg" key="outputLocation" value="aupt-output" />
        <option name="run-arg" key="shuffle" value="true" />

        <option name="run-arg" key="iterations" value="50" />

        <option name="bugreport-check-interval" value="5" />
        <option name="on-test-failure" value="SCREENSHOT" />
        <option name="sync-time" value="30000" />
    </test>
</configuration>
