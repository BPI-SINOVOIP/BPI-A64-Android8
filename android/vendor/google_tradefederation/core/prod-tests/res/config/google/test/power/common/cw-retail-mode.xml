<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright 2015 Google Inc. All Rights Reserved -->
<configuration description="Workaround to avoid the retail animation mode start">
    <!-- Back to home before starting the retail test card service -->
    <target_preparer class="com.android.tradefed.targetprep.RunCommandTargetPreparer" >
        <option name="run-command" value="input keyevent 3"/>
        <option name="run-command" value="svc power stayon false" />
    </target_preparer>
    <!--  Need to make sure the device enter ambient mode before start retail service -->
    <target_preparer class="com.android.tradefed.targetprep.TimeWaster" >
        <option name="delay" value="125000" />
    </target_preparer>
    <target_preparer class="com.android.tradefed.targetprep.RunCommandTargetPreparer">
        <option name="run-command" value="am startservice -a com.google.android.clockwork.settings.ENTER_RETAIL_FOR_TEST" />
        <!-- Keep device stayon so that the retail mode can be started -->
        <option name="run-command" value="svc power stayon true"/>
    </target_preparer>
</configuration>
