<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright 2015 Google Inc. All Rights Reserved -->
<!-- Required input: monsoon_serialno monsoonserialno -->
<configuration description="Downloads build, flashes on device, and runs power test">
    <include name="google/power2/ClockWork/settings/power-screen-off" />
    <option name="test-tag" value="clockWifiScreenOff" />
    <target_preparer class="com.android.tradefed.targetprep.RunCommandTargetPreparer">
        <option name="run-command" value="content update --uri content://com.google.android.wearable.settings/auto_wifi --bind auto_wifi:i:0" />
        <option name="run-command" value="svc wifi enable" />
        <option name="run-command" value="am startservice com.google.android.apps.wearable.settings/com.google.android.clockwork.settings.wifi.WifiSettingsService" />
        <option name="run-command" value="dumpsys activity service com.google.android.apps.wearable.settings/com.google.android.clockwork.settings.wifi.WifiSettingsService WL-power-2 2 '/2wcb9963'" />
        <option name="run-command" value="am stopservice com.google.android.apps.wearable.settings/com.google.android.clockwork.settings.wifi.WifiSettingsService" />
    </target_preparer>
    <target_preparer class="com.android.tradefed.targetprep.KeyValueConfigPreparer" >
        <option name="path" value="${EXTERNAL_STORAGE}/PowerTests.conf" />
        <option name="separator" value="=" />
        <option name="config" key="TestCase" value="wifiScreenOff" />
        <option name="config" key="ScreenOffTime" value="600000" />
    </target_preparer>
    <test class="com.google.android.power.tests.PowerTestRunner">
        <option name="clockWork" value="true" />
        <option name="report_unit_mw" value="true" />
        <option name="test_case_name" value="testIdleScreenOff" />
        <option name="test_package_name" value="com.android.test.uiautomator.platform.powertests" />
        <option name="test_class_name" value="ClockWorkTests" />
        <option name="test_runner_name" value="android.support.test.uiautomator.UiAutomatorInstrumentationTestRunner" />
        <option name="monsoon_voltage" value="3.8" />
        <option name="monsoon_samples" value="14000" />
        <option name="ru_name" value="ClockWorkScreenOff" />
    </test>
</configuration>
