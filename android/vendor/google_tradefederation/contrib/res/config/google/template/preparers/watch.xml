<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright 2016 Google Inc. All Rights Reserved -->
<!-- Common build provider and preparers for Clockwork ASIT templates. -->
<configuration description="Common template for watch in a paired setup." >
    <template-include name="OTA" default="google/template/preparers/watch-lcp-build" />
    <device name="watch">
        <target_preparer class="com.google.android.tradefed.targetprep.GoogleDeviceFlashPreparer" >
            <option name="userdata-flash" value="WIPE" />
        </target_preparer>
        <target_preparer class="com.android.tradefed.targetprep.DeviceCleaner" />
        <target_preparer class="com.google.android.tradefed.targetprep.GrantPermissionPreparer" />
        <target_preparer class="com.google.android.tradefed.targetprep.GoogleDeviceSetup">
            <option name="screen-always-on" value="on" />
            <option name="screen-adaptive-brightness" value="off" />
            <option name="screen-brightness" value="50" />
            <option name="set-test-harness" value="false" />
        </target_preparer>
        <target_preparer class="com.android.tradefed.targetprep.TestAppInstallSetup">
            <option name="test-file-name" value="AuptCW.apk" />
            <option name="test-file-name" value="sl4a.apk" />
            <option name="cleanup-apks" value="true" />
        </target_preparer>
        <target_preparer class="com.android.tradefed.targetprep.InstallApkSetup" />
        <target_preparer class="com.android.tradefed.targetprep.PushFilePreparer" />
        <!-- prep clockwork device with some commands -->
        <target_preparer class="com.android.tradefed.targetprep.RunCommandTargetPreparer">
            <!-- Disable WiFi opt-in dialog -->
            <option name="run-command" value="pm disable com.google.android.wearable.app/com.google.android.clockwork.home.cloudsync.CloudSyncOptInService" />
            <!-- Disable charging activities that interfere with pairing -->
            <option name="run-command" value="pm disable com.lge.wearable.chargingmode/com.lge.wearable.chargingmode.ChargingActivity" />
            <option name="run-command" value="pm disable com.motorola.targetnotif/com.motorola.loop.ChargeActivity" />
            <!-- Disable AT&T NumberSync -->
            <option name="run-command" value="pm disable com.google.android.apps.wearable.numbersync" />
        </target_preparer>
        <target_preparer class="com.google.android.tradefed.targetprep.GoogleAccountPreparer">
            <option name="remove-accounts" value="true" />
        </target_preparer>
        <target_preparer class="com.google.android.tradefed.targetprep.InstallGmsCoreApkSetup">
            <option name="version-number" value="v12" />
            <option name="file-name-prefix-32" value="GmsCore_wearable_armv7_alldpi_release-armeabi-v7a-gmscore_"/>
            <option name="install-arg" value="-d" />
        </target_preparer>
    </device>

</configuration>
